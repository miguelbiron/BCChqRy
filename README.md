
Description
-----------

This package provides a single function that takes an .iqy file generated by the [Statistical Database of the Central Bank of Chile](https://si3.bcentral.cl/Siete/secure/cuadros/home.aspx), and returns a dataframe with the results of the query.

Installation
------------

``` r
if (!require(devtools)) {
    install.packages('devtools')
}
devtools::install_github('miguelbiron/BCChqRy')
```

Example
-------

In this brief example, I assume you have downloaded and placed in your working directory the `UF_IVP_DIARIO.iqy` file associated with the query "Precios" &gt; "UF - IVP - UTM" &gt; "UF-IVP diario" in the BCCh database.

``` r
library(BCChqRy)
suppressPackageStartupMessages(library(dplyr))

get_bcch_data("UF_IVP_DIARIO.iqy", q_values = c(2018, 2018)) %>% 
  head() %>% 
  knitr::kable()
```

| FECHA      |  Unidad de fomento (UF)|  Indice de valor promedio (IVP)|
|:-----------|-----------------------:|-------------------------------:|
| 2018-01-01 |                26799.01|                        27918.44|
| 2018-01-02 |                26799.87|                        27919.31|
| 2018-01-03 |                26800.73|                        27920.18|
| 2018-01-04 |                26801.60|                        27921.05|
| 2018-01-05 |                26802.46|                        27921.92|
| 2018-01-06 |                26803.33|                        27922.79|

How to get an .iqy file from the BCCh database
----------------------------------------------

As you navigate the [database](https://si3.bcentral.cl/Siete/secure/cuadros/home.aspx), you will eventually arrive at a dataset that you'd like to download, including an appropriate frequency ("frecuencia") and calculation ("calculo"). Now, simply click the ![IQY Button](https://si3.bcentral.cl/Siete/Images/Botonera/diseno/iqy.gif) button located in the upper-right corner above the data table (its caption is "Consulta Excel dinamica"). This will download the .iqy file associated with the data you requested, which you can then use in R with `BCChqRy`.

TODO
----

-   More testing in platforms other than Windows
-   Improve error handling
